generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url       = env("DATABASE_URL")
}

model Usuario {
  id              Int           @id @default(autoincrement())
  nombres         String        // â¬…ï¸ Almacena los nombres
  apellidos       String        // â¬…ï¸ Almacena los apellidos
  usuario         String        @unique // â¬…ï¸ El nombre de usuario Ãºnico
  correo          String        @unique
  password        String        // â¬…ï¸ La contraseÃ±a debe ser obligatoria
  rol             String        @default("estudiante") // â¬…ï¸ Valor por defecto
  postulaciones   Postulacion[]
}

model Empresa {
  id Int @id @default(autoincrement())

  // Credenciales de acceso
  email           String @unique // â¬…ï¸ MODIFICADO: Debe ser Ãºnico para el login
  password        String // â¬…ï¸ AGREGADO: Campo para almacenar el hash de la contraseÃ±a

  // InformaciÃ³n BÃ¡sica
  nombre          String
  phones          String
  contactName     String
  nit             String? @unique // â¬…ï¸ RECOMENDACIÃ“N: NIT Ãºnico si aplica en tu paÃ­s

  // UbicaciÃ³n
  address         String
  city            String
  department      String

  // InformaciÃ³n Empresarial
  companyType     String
  economicSector  String
  foundationYear  Int
  employees       String

  // InformaciÃ³n Financiera y Comercial
  annualRevenue        String
  totalAssets          String?
  equity               String?
  distributionChannels String
  mainClients          String
  emailAuthorization   Boolean @default(false)

  createdAt DateTime @default(now())

  // ğŸ”¹ RelaciÃ³n con Vacantes
  vacantes Vacante[]
}

model Vacante {
  id            Int           @id @default(autoincrement())
  titulo        String
  descripcion   String
  ubicacion     String
  tipo          String         // Ej: "Tiempo completo", "Medio tiempo", "PrÃ¡ctica"
  modalidad     String         // Ej: "Presencial", "Remoto", "HÃ­brido"
  salario       String?        // Opcional
  fechaCreacion DateTime       @default(now())

  empresaId     Int
  empresa       Empresa        @relation(fields: [empresaId], references: [id])

  postulaciones Postulacion[]
}

model Postulacion {
Â  idÂ  Â  Â  Â  IntÂ  Â  Â  @id @default(autoincrement())
Â  telefonoÂ  String?
Â  cv_urlÂ  Â  String?
  // âœ… CAMPO AGREGADO: Para registrar el estado de la postulaciÃ³n
Â  estado    String   @default("PENDIENTE") // Usamos String con un valor por defecto

Â  fechaÂ  Â  Â DateTime @default(now())

Â  vacanteId Int
Â  usuarioId Int

Â  vacanteÂ  Â Vacante @relation(fields: [vacanteId], references: [id])
Â  usuarioÂ  Â Usuario @relation(fields: [usuarioId], references: [id])
}